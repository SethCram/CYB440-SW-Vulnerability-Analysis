#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h> /* for read */
#include <ctype.h> /* for isspace */ 

int rd_string(int fd, char *buffer, size_t length)
{
    int ch;
    char *ptr;

    printf("%s\n", buffer);

    if(length == 0)
        return -1;
    length--;

    ch = read(fd, buffer, length);

    printf("%d\n", ch);
    printf("%zu\n", length);
    printf("%c\n", buffer[length]);

    if(ch <= 0)
        return -1;

    buffer[length] = '\0';

    // remove whitespace at the end
    for(ptr = &buffer[strlen(buffer)-1]; isspace(*ptr); ptr = ptr - 1)   /* changed is_space to isspace */  
    {
        *ptr = '\0';
    }
    return 0;
}

int main(int argc, char *argv[  ]) {
    char *buffer = "wow this is great   d";
    rd_string(0, buffer, 22);
}